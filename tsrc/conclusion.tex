
In this work, the first system RISC-V-based MP2 audio encoder has been developed to the best of our knowledge. The system has been implemented with the IOb-SoC system equipped with the \textit{VEXRISC} CPU and the \textit{Versat} reconfigurable accelerator.

Compared with the commercial \textit{CWda74} IP Core, the support for floating-point arithmetic allows us to use high-precision and good-quality open-source software such as TwoLame, as we have not found any fixed-point implementations. The CWda74 uses third-party proprietary software and needs to pay royalties for its use. However, due to its fixed-point performance, it uses considerably lower resources and can work at a substantially lower frequency.


\subsection{Achievements}

The most notable results of this work are summarized below.

\begin{itemize} 

\item A new IOb-SoC system called IOb-MP2-E has been developed to support the development of the embedded MP2 audio encoder. This system can be emulated on a PC or run on an FPGA.

\item The \textit{TwoLAME}'s library was successfully ported to the IOb-MP2-E with floating-point precision.

\item Software optimizations were done to reduce unnecessary operations related to mathematical functions and memory allocation.

\item Using the FPGA implementation, the software was profiled to determine which functions took most of the execution time. The \textit{psycho\_3\_threshold} was marked as the function to be accelerated using \textit{Versat}.

\item Two hardware accelerators were developed, each corresponding to a different part of the function.

\item The FPGA implementation results demonstrate that the addition of the \textit{Versat} accelerator reduces the encoding time considerably, with results close to the theoretical minimum. The obtained speed was not enough to meet the real-time requirements at the implementation frequency of 100MHz. The achieved performance for the worst-case scenario shows that an implementation at 240MHz would meet the goal.

\item The FPGA implementation results also demonstrate that the addition of the \textit{Versat} accelerator has a considerable impact on the resources used in a factor of 10x. It shows that the benefits of using these accelerators do not cover the costs. It also suggests that a smaller but frequently reconfigured single accelerator is preferable.

\end{itemize} 

\subsection{Future work}

The work carried out demonstrates that the main area for improvement is to reduce the resources necessary. Some improvements that have been identified are outlined below.

\begin{itemize} 

\item Make the accelerator reconfigurable to perform multiple functions while reusing its hardware and implementing various accelerators.

\item Explore using custom instructions created to extend the  \textit{VEXRISCV}â€™s ISA, attempting to accelerate \textit{TwoLAME} algorithm horizontally. 

\end{itemize} 

These findings contribute to the ongoing efforts to provide more efficient and competitive solutions for audio encoding in MPEG-1/2 Layer II format, with the potential for real-world applications in broadcasting and multimedia.



